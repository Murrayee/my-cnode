{"version":3,"sources":["webpack:///./public/reducers/HomePage.js?0cd4"],"names":["selectedTab","state","action","type","tab","tabDataItem","isFetching","page","scrollT","topics","concat","limit","tabData","homePage","sTab","tData"],"mappings":";;;;;;;;;;;AAAA;;;;AACA;AACA,KAAMA,cAAc,SAAdA,WAAc,CAACC,KAAD,EAAQC,MAAR,EAAmB;AACnC,aAAQA,OAAOC,IAAf;AACI;AACI,oBAAOD,OAAOE,GAAd;AACJ;AACI,oBAAOH,KAAP;AAJR;AAMH,EAPD;AAQA;AACA,UAASI,WAAT,GAAqF;AAAA,SAA/DJ,KAA+D,uEAAvD,EAACK,YAAW,KAAZ,EAAkBC,MAAK,CAAvB,EAAyBC,SAAQ,CAAjC,EAAmCC,QAAO,EAA1C,EAAuD;AAAA,SAATP,MAAS;;AACjF,aAAQA,OAAOC,IAAf;AACI;AACI,oBAAO;AACHG,6BAAW,IADR,EACaC,MAAK,CADlB,EACoBC,SAAQ,CAD5B,EAC8BC,QAAO;AADrC,cAAP;AAGJ;AACI,iBAAGR,MAAMM,IAAN,GAAaL,OAAOK,IAAvB,EAA4B;AACxB,qBAAIE,SAASR,MAAMQ,MAAnB;AACAP,wBAAOO,MAAP,GAAgBA,OAAOC,MAAP,CAAcR,OAAOO,MAArB,CAAhB;AACH;AACD,oBAAO;;AAEHH,6BAAY,KAFT;AAGHC,uBAAKL,OAAOK,IAHT;AAIHE,yBAAOP,OAAOO,MAJX;AAKHE,wBAAMT,OAAOS;AALV,cAAP;AAOJ;AACI,oBAAO;AACHL,6BAAY,KADT;AAEHC,uBAAKL,OAAOK,IAFT;AAGHE,yBAAOP,OAAOO,MAHX;AAIHD,0BAAQN,OAAOM,OAJZ;AAKHG,wBAAMT,OAAOS;AALV,cAAP;AAOJ;AACI,oBAAOV,KAAP;AA1BR;AA4BH;AACD,KAAMW,UAAU,SAAVA,OAAU,GAAyB;AAAA,SAAxBX,KAAwB,uEAAhB,EAAgB;AAAA,SAAXC,MAAW;;AACrC,aAAQA,OAAOC,IAAf;AACI;AACA;AACA;AACI,wCACKD,OAAOE,GADZ,EACkBC,YAAYJ,MAAMC,OAAOE,GAAb,CAAZ,EAA+BF,MAA/B,CADlB;AAGJ;AACI,oBAAOD,KAAP;AARR;AAUH,EAXD;AAYA,KAAMY,WAAW,SAAXA,QAAW,GAAiD;AAAA,SAAhDZ,KAAgD,uEAA1C,EAACD,aAAY,KAAb,EAAmBY,SAAQ,EAA3B,EAA0C;AAAA,SAAXV,MAAW;;AAC9D,SAAGD,KAAH,EAAS;AACL,aAAMa,OAAOd,YAAYC,MAAMD,WAAlB,EAA8BE,MAA9B,CAAb;AACA,aAAMa,QAAQH,QAAQX,MAAMW,OAAd,EAAsBV,MAAtB,CAAd;AACA;AACA,gBAAO;AACHF,0BAAYc,IADT;AAEHF,sBAAQG;AAFL,UAAP;AAIH;AACD,YAAOd,KAAP;AACH,EAXD;mBAYeY,Q","file":"0.9795d29b4cddf8757eb5.hot-update.js","sourcesContent":["import {SELECT_TAB, REQUEST_TOPICS, RECEIVE_TOPICS,RECORD_SCROLLT} from \"../actions/actions\";\r\n//\r\nconst selectedTab = (state, action) => {\r\n    switch (action.type) {\r\n        case SELECT_TAB:\r\n            return action.tab;\r\n        default:\r\n            return state\r\n    }\r\n};\r\n// 当组件第一次发出REQUEST_TOPICS后，需要对其返回的state进行初始化，否则没有topics等属性会报错\r\nfunction tabDataItem (state = {isFetching:false,page:0,scrollT:0,topics:[]},action ) {\r\n    switch (action.type) {\r\n        case REQUEST_TOPICS:\r\n            return {\r\n                isFetching:true,page:0,scrollT:0,topics:[]\r\n            };\r\n        case RECEIVE_TOPICS:\r\n            if(state.page < action.page){\r\n                let topics = state.topics;\r\n                action.topics = topics.concat(action.topics)\r\n            }\r\n            return {\r\n\r\n                isFetching: false,\r\n                page:action.page,\r\n                topics:action.topics,\r\n                limit:action.limit\r\n            };\r\n        case RECORD_SCROLLT:\r\n            return {\r\n                isFetching: false,\r\n                page:action.page,\r\n                topics:action.topics,\r\n                scrollT:action.scrollT,\r\n                limit:action.limit\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n}\r\nconst tabData = (state = { }, action) => {\r\n    switch (action.type) {\r\n        case RECEIVE_TOPICS:\r\n        case REQUEST_TOPICS:\r\n        case RECORD_SCROLLT:\r\n            return {\r\n                [action.tab]: tabDataItem(state[action.tab], action)\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n};\r\nconst homePage = (state={selectedTab:'all',tabData:{}},action) => {\r\n    if(state){\r\n        const sTab = selectedTab(state.selectedTab,action);\r\n        const tData = tabData(state.tabData,action);\r\n        // 返回的一定要是一个新的对象，如果只是改变原来的state,返回的还是原来的state对象,就无法被store.subscribe监听到，从而不会对组件状态进行更新\r\n        return {\r\n            selectedTab:sTab,\r\n            tabData:tData\r\n        }\r\n    }\r\n    return state\r\n};\r\nexport default homePage;\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/reducers/HomePage.js"],"sourceRoot":""}